<h1>Listing <%= plural_table_name %></h1>

<table>
  <thead>
    <tr>
      <th><%%= t'.id' %></th>
      <% attributes.reject(&:password_digest?).each do |attribute| -%>
        <th><%%= t'.<%= attribute.human_name.downcase.tr(" ", "_") %>' %></th>
      <% end -%>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <%% @<%= plural_table_name %>.each do |<%= singular_table_name %>| %>
    <tr>
      <%%if can? :show, <%= singular_table_name.camelize%> %>
      <td><%%=link_to <%= singular_table_name %>.id, <%= singular_table_name %>, :class => 'button'%></td>
      <%%else%>
      <td><%%= label <%= singular_table_name %>.id, <%= singular_table_name %>.id, :class => 'button'%></td>
      <%%end%>
      <%x = 0%>
      <% attributes.reject(&:password_digest?).each do |attribute| -%>
        <%if x == 0%>
          <%% @model = <%= singular_table_name %> %> 
        <%end -%>
        <td><%%= <%= singular_table_name %>.<%= attribute.name %> %></td>
        <%x = x +1%>
      <% end -%>
      <%%= render "layouts/index_links" %>
    </tr>
    <%% end %>
  </tbody>
</table>

<br>
<%%= render "layouts/action_links" %>
